(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";
var Helper_1 = require('./Helper');
var CellController = (function () {
    function CellController(cell, x, y) {
        this.isAlive = false;
        this.cell = cell;
        this.x = x;
        this.y = y;
    }
    CellController.prototype.watchNeighbors = function () {
        var alives = 0;
        var deads = 0;
        var around = Helper_1.Helper.getNeighbors(this.x, this.y);
        for (var _i = 0, around_1 = around; _i < around_1.length; _i++) {
            var pos = around_1[_i];
            var neighbor = document.getElementById(pos[0] + "," + pos[1]);
            if (neighbor != undefined) {
                if (neighbor.classList.contains('alive'))
                    alives++;
                if (neighbor.classList.contains('dead'))
                    deads++;
            }
        }
        this.rules(alives, deads);
    };
    CellController.prototype.rules = function (alives, deads) {
        this.change = this.noChnage;
        if (this.isAlive && alives < 2)
            this.change = this.dies;
        if (this.isAlive && alives > 3)
            this.change = this.dies;
        // 2 or 3 alives, lives unchanged
        if (!this.isAlive && alives == 3)
            this.change = this.lives;
    };
    CellController.prototype.commitChnage = function () {
        this.change();
        Helper_1.Helper.printCell(this);
    };
    CellController.prototype.noChnage = function () { };
    CellController.prototype.lives = function () {
        this.cell.classList.remove('dead');
        this.cell.classList.add('alive');
        this.isAlive = true;
    };
    CellController.prototype.dies = function () {
        this.cell.classList.remove('alive');
        this.cell.classList.add('dead');
        this.isAlive = false;
    };
    return CellController;
}());
exports.CellController = CellController;

},{"./Helper":2}],2:[function(require,module,exports){
"use strict";
exports.Helper = {
    getNeighbors: function (x, y) {
        return [
            [x - 1, y - 1],
            [x - 1, y],
            [x - 1, y + 1],
            [x, y - 1],
            // [x, y],
            [x, y + 1],
            [x + 1, y - 1],
            [x + 1, y],
            [x + 1, y + 1],
        ];
    },
    printCell: function (cell) {
        var alives = document.getElementById('print-alives');
        if (cell.isAlive)
            alives.innerHTML += cell.x + ", " + cell.y + " <br>";
    }
};

},{}],3:[function(require,module,exports){
"use strict";
var CellController_1 = require('../cell/CellController');
var GridController = (function () {
    function GridController(id) {
        this.containerElem = document.getElementById(id);
        this.fillGridDone = new CustomEvent('fill-grid-done');
        this.size = 20; //make it more dynamic?
        this.grid = [];
        while (this.grid.push([]) < this.size)
            ;
    }
    GridController.prototype.getCell = function (x, y) {
        return this.grid[x][y];
    };
    GridController.prototype.fillGrid = function (callback) {
        this.containerElem.innerHTML = '';
        document.addEventListener('fill-grid-done', function (e) {
            callback();
        });
        for (var x in this.grid) {
            for (var y in this.grid) {
                this.createNewElement(Number(x), Number(y));
            }
        }
    };
    GridController.prototype.tick = function () {
        for (var x in this.grid) {
            for (var y in this.grid) {
                this.grid[x][y].watchNeighbors();
            }
        }
        for (var x in this.grid) {
            for (var y in this.grid) {
                this.grid[x][y].commitChnage();
            }
        }
    };
    GridController.prototype.createNewElement = function (x, y) {
        var _this = this;
        setTimeout(function () {
            var elem = document.createElement('div');
            elem.id = x + "," + y;
            elem.className = "gridPosition " + (y === 0 ? 'row' : '');
            _this.containerElem.appendChild(elem);
            _this.grid[x][y] = new CellController_1.CellController(elem, x, y);
            if (x == (_this.size - 1) && y == (_this.size - 1)) {
                document.dispatchEvent(_this.fillGridDone);
            }
        }, 50);
    };
    return GridController;
}());
exports.GridController = GridController;

},{"../cell/CellController":1}],4:[function(require,module,exports){
"use strict";
var GridController_1 = require('./grid/GridController');
window.onload = function () {
    var grid = new GridController_1.GridController('grid');
    document.getElementById('inputButton').onclick = function () {
        document.getElementById('grid').innerHTML = '';
        var elem = document.createElement('div');
        elem.id = 'grid' + Math.random();
        document.getElementById('grid').appendChild(elem);
        grid = new GridController_1.GridController(elem.id);
        grid.fillGrid(function () {
            var textArea = document.getElementById('manual-input');
            var lines = textArea.value.split("\n");
            for (var _i = 0, lines_1 = lines; _i < lines_1.length; _i++) {
                var line = lines_1[_i];
                var aux = line.split(',');
                if (aux.length === 2) {
                    grid.getCell(Number(aux[0]), Number(aux[1])).lives();
                }
            }
        });
    };
    var manualTick = new CustomEvent('manual-tick');
    document.getElementById('tickButton').onclick = function () {
        document.getElementById('print-alives').innerHTML = '';
        document.getElementById('print-deads').innerHTML = '';
        grid.tick();
    };
};

},{"./grid/GridController":3}]},{},[4])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvY2VsbC9DZWxsQ29udHJvbGxlci50cyIsInNyYy9jZWxsL0hlbHBlci50cyIsInNyYy9ncmlkL0dyaWRDb250cm9sbGVyLnRzIiwic3JjL21haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDQ0EsdUJBQXdCLFVBQVUsQ0FBQyxDQUFBO0FBRW5DO0lBUUksd0JBQVksSUFBaUIsRUFBRSxDQUFTLEVBQUUsQ0FBUztRQUMvQyxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztRQUNyQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNYLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQztJQUVELHVDQUFjLEdBQWQ7UUFDSSxJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDZixJQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7UUFFZCxJQUFJLE1BQU0sR0FBRyxlQUFNLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWpELEdBQUcsQ0FBQyxDQUFZLFVBQU0sRUFBTixpQkFBTSxFQUFOLG9CQUFNLEVBQU4sSUFBTSxDQUFDO1lBQWxCLElBQUksR0FBRyxlQUFBO1lBQ1IsSUFBSSxRQUFRLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLFNBQUksR0FBRyxDQUFDLENBQUMsQ0FBRyxDQUFDLENBQUM7WUFFOUQsRUFBRSxDQUFDLENBQUMsUUFBUSxJQUFJLFNBQVMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3hCLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO29CQUFDLE1BQU0sRUFBRSxDQUFDO2dCQUNuRCxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztvQkFBQyxLQUFLLEVBQUUsQ0FBQztZQUNyRCxDQUFDO1NBQ0o7UUFDRCxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBRUQsOEJBQUssR0FBTCxVQUFNLE1BQWMsRUFBRSxLQUFhO1FBQy9CLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUU1QixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUM7WUFBQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDeEQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDO1lBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQ3hELGlDQUFpQztRQUNqQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLElBQUksTUFBTSxJQUFJLENBQUMsQ0FBQztZQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztJQUMvRCxDQUFDO0lBRUQscUNBQVksR0FBWjtRQUNJLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNkLGVBQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUVELGlDQUFRLEdBQVIsY0FBYSxDQUFDO0lBRWQsOEJBQUssR0FBTDtRQUNJLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNuQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDakMsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7SUFDeEIsQ0FBQztJQUVELDZCQUFJLEdBQUo7UUFDSSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDcEMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO0lBQ3pCLENBQUM7SUFFTCxxQkFBQztBQUFELENBNURBLEFBNERDLElBQUE7QUE1RFksc0JBQWMsaUJBNEQxQixDQUFBOzs7O0FDNURVLGNBQU0sR0FBRztJQUVoQixZQUFZLEVBQUUsVUFBUyxDQUFTLEVBQUUsQ0FBUztRQUN2QyxNQUFNLENBQUM7WUFDSCxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNkLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDVixDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNkLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDVixVQUFVO1lBQ1YsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNWLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2QsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNWLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ2pCLENBQUM7SUFDTixDQUFDO0lBRUQsU0FBUyxFQUFFLFVBQVMsSUFBb0I7UUFDdEMsSUFBSSxNQUFNLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUNyRCxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQUMsTUFBTSxDQUFDLFNBQVMsSUFBTyxJQUFJLENBQUMsQ0FBQyxVQUFLLElBQUksQ0FBQyxDQUFDLFVBQU8sQ0FBQztJQUNuRSxDQUFDO0NBRUosQ0FBQTs7OztBQ3ZCRCwrQkFBK0Isd0JBQXdCLENBQUMsQ0FBQTtBQUV4RDtJQVdJLHdCQUFZLEVBQVU7UUFDbEIsSUFBSSxDQUFDLGFBQWEsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2pELElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxXQUFXLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFDLHVCQUF1QjtRQUN2QyxJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUNmLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUk7WUFBQyxDQUFDO0lBQzNDLENBQUM7SUFFRCxnQ0FBTyxHQUFQLFVBQVEsQ0FBUyxFQUFFLENBQVM7UUFDMUIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDekIsQ0FBQztJQUVELGlDQUFRLEdBQVIsVUFBUyxRQUFrQjtRQUN2QixJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7UUFFbEMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGdCQUFnQixFQUFFLFVBQVMsQ0FBQztZQUNsRCxRQUFRLEVBQUUsQ0FBQTtRQUNkLENBQUMsQ0FBQyxDQUFDO1FBRUgsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDdEIsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ3RCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDaEQsQ0FBQztRQUNMLENBQUM7SUFDTCxDQUFDO0lBRUQsNkJBQUksR0FBSjtRQUNFLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUN0QixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ3JDLENBQUM7UUFDTCxDQUFDO1FBQ0QsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDdEIsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ3RCLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDbkMsQ0FBQztRQUNMLENBQUM7SUFDSCxDQUFDO0lBRUQseUNBQWdCLEdBQWhCLFVBQWlCLENBQVMsRUFBRSxDQUFTO1FBQXJDLGlCQVlDO1FBWEcsVUFBVSxDQUFDO1lBQ1AsSUFBSSxJQUFJLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN6QyxJQUFJLENBQUMsRUFBRSxHQUFNLENBQUMsU0FBSSxDQUFHLENBQUM7WUFDdEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxtQkFBZ0IsQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLEdBQUcsRUFBRSxDQUFFLENBQUM7WUFDeEQsS0FBSSxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDckMsS0FBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLCtCQUFjLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUVqRCxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMvQyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUM5QyxDQUFDO1FBQ0wsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ1gsQ0FBQztJQUNMLHFCQUFDO0FBQUQsQ0EvREEsQUErREMsSUFBQTtBQS9EWSxzQkFBYyxpQkErRDFCLENBQUE7Ozs7QUNoRUQsK0JBQStCLHVCQUF1QixDQUFDLENBQUE7QUFHdkQsTUFBTSxDQUFDLE1BQU0sR0FBRztJQUVaLElBQUksSUFBSSxHQUFHLElBQUksK0JBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUV0QyxRQUFRLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUFDLE9BQU8sR0FBRztRQUUvQyxRQUFRLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7UUFFL0MsSUFBSSxJQUFJLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsRUFBRSxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDakMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFbEQsSUFBSSxHQUFHLElBQUksK0JBQWMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFakMsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUNWLElBQUksUUFBUSxHQUFxQixRQUFRLENBQUMsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ3pFLElBQUksS0FBSyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3ZDLEdBQUcsQ0FBQyxDQUFhLFVBQUssRUFBTCxlQUFLLEVBQUwsbUJBQUssRUFBTCxJQUFLLENBQUM7Z0JBQWxCLElBQUksSUFBSSxjQUFBO2dCQUNULElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzFCLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDbkIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ3pELENBQUM7YUFDSjtRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFBO0lBRUQsSUFBSSxVQUFVLEdBQUcsSUFBSSxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDaEQsUUFBUSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxPQUFPLEdBQUc7UUFDNUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO1FBQ3ZELFFBQVEsQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztRQUV0RCxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDaEIsQ0FBQyxDQUFBO0FBQ0wsQ0FBQyxDQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlxuaW1wb3J0IHsgSGVscGVyIH0gZnJvbSAgJy4vSGVscGVyJztcblxuZXhwb3J0IGNsYXNzIENlbGxDb250cm9sbGVyIHtcblxuICAgIHg6IG51bWJlcjtcbiAgICB5OiBudW1iZXI7XG4gICAgY2VsbDogSFRNTEVsZW1lbnQ7XG4gICAgaXNBbGl2ZTogYm9vbGVhbjtcbiAgICBjaGFuZ2U6IEZ1bmN0aW9uO1xuXG4gICAgY29uc3RydWN0b3IoY2VsbDogSFRNTEVsZW1lbnQsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuaXNBbGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNlbGwgPSBjZWxsO1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgIH1cblxuICAgIHdhdGNoTmVpZ2hib3JzKCkge1xuICAgICAgICBsZXQgYWxpdmVzID0gMDtcbiAgICAgICAgbGV0IGRlYWRzID0gMDtcblxuICAgICAgICBsZXQgYXJvdW5kID0gSGVscGVyLmdldE5laWdoYm9ycyh0aGlzLngsIHRoaXMueSk7XG5cbiAgICAgICAgZm9yIChsZXQgcG9zIG9mIGFyb3VuZCkge1xuICAgICAgICAgICAgbGV0IG5laWdoYm9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7cG9zWzBdfSwke3Bvc1sxXX1gKTtcblxuICAgICAgICAgICAgaWYgKG5laWdoYm9yICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChuZWlnaGJvci5jbGFzc0xpc3QuY29udGFpbnMoJ2FsaXZlJykpIGFsaXZlcysrO1xuICAgICAgICAgICAgICAgIGlmIChuZWlnaGJvci5jbGFzc0xpc3QuY29udGFpbnMoJ2RlYWQnKSkgZGVhZHMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJ1bGVzKGFsaXZlcywgZGVhZHMpO1xuICAgIH1cblxuICAgIHJ1bGVzKGFsaXZlczogbnVtYmVyLCBkZWFkczogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlID0gdGhpcy5ub0NobmFnZTtcblxuICAgICAgICBpZiAodGhpcy5pc0FsaXZlICYmIGFsaXZlcyA8IDIpIHRoaXMuY2hhbmdlID0gdGhpcy5kaWVzO1xuICAgICAgICBpZiAodGhpcy5pc0FsaXZlICYmIGFsaXZlcyA+IDMpIHRoaXMuY2hhbmdlID0gdGhpcy5kaWVzO1xuICAgICAgICAvLyAyIG9yIDMgYWxpdmVzLCBsaXZlcyB1bmNoYW5nZWRcbiAgICAgICAgaWYgKCF0aGlzLmlzQWxpdmUgJiYgYWxpdmVzID09IDMpIHRoaXMuY2hhbmdlID0gdGhpcy5saXZlcztcbiAgICB9XG5cbiAgICBjb21taXRDaG5hZ2UoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlKCk7XG4gICAgICAgIEhlbHBlci5wcmludENlbGwodGhpcyk7XG4gICAgfVxuXG4gICAgbm9DaG5hZ2UoKSB7IH1cblxuICAgIGxpdmVzKCkge1xuICAgICAgICB0aGlzLmNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnZGVhZCcpO1xuICAgICAgICB0aGlzLmNlbGwuY2xhc3NMaXN0LmFkZCgnYWxpdmUnKTtcbiAgICAgICAgdGhpcy5pc0FsaXZlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBkaWVzKCkge1xuICAgICAgICB0aGlzLmNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnYWxpdmUnKTtcbiAgICAgICAgdGhpcy5jZWxsLmNsYXNzTGlzdC5hZGQoJ2RlYWQnKTtcbiAgICAgICAgdGhpcy5pc0FsaXZlID0gZmFsc2U7XG4gICAgfVxuXG59XG4iLCJcbmltcG9ydCB7IENlbGxDb250cm9sbGVyIH0gZnJvbSAnLi9DZWxsQ29udHJvbGxlcidcblxuZXhwb3J0IGxldCBIZWxwZXIgPSB7XG5cbiAgICBnZXROZWlnaGJvcnM6IGZ1bmN0aW9uKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBbeCAtIDEsIHkgLSAxXSxcbiAgICAgICAgICAgIFt4IC0gMSwgeV0sXG4gICAgICAgICAgICBbeCAtIDEsIHkgKyAxXSxcbiAgICAgICAgICAgIFt4LCB5IC0gMV0sXG4gICAgICAgICAgICAvLyBbeCwgeV0sXG4gICAgICAgICAgICBbeCwgeSArIDFdLFxuICAgICAgICAgICAgW3ggKyAxLCB5IC0gMV0sXG4gICAgICAgICAgICBbeCArIDEsIHldLFxuICAgICAgICAgICAgW3ggKyAxLCB5ICsgMV0sXG4gICAgICAgIF07XG4gICAgfSxcblxuICAgIHByaW50Q2VsbDogZnVuY3Rpb24oY2VsbDogQ2VsbENvbnRyb2xsZXIpIHtcbiAgICAgIGxldCBhbGl2ZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtYWxpdmVzJyk7XG4gICAgICBpZihjZWxsLmlzQWxpdmUpIGFsaXZlcy5pbm5lckhUTUwgKz0gYCR7Y2VsbC54fSwgJHtjZWxsLnl9IDxicj5gO1xuICAgIH1cblxufVxuIiwiXG5pbXBvcnQgeyBDZWxsQ29udHJvbGxlciB9IGZyb20gJy4uL2NlbGwvQ2VsbENvbnRyb2xsZXInO1xuXG5leHBvcnQgY2xhc3MgR3JpZENvbnRyb2xsZXIge1xuXG4gICAgY29udGFpbmVyRWxlbTogSFRNTEVsZW1lbnQ7XG4gICAgZ3JpZDogQ2VsbENvbnRyb2xsZXJbXVtdO1xuICAgIHNpemU6IG51bWJlcjtcblxuICAgIC8vIGV2ZW50c1xuICAgIGZpbGxHcmlkRG9uZTogRXZlbnQ7XG5cbiAgICBjZWxsczogQXJyYXk8Q2VsbENvbnRyb2xsZXI+O1xuXG4gICAgY29uc3RydWN0b3IoaWQ6IHN0cmluZykge1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICAgIHRoaXMuZmlsbEdyaWREb25lID0gbmV3IEN1c3RvbUV2ZW50KCdmaWxsLWdyaWQtZG9uZScpO1xuICAgICAgICB0aGlzLnNpemUgPSAyMDsgLy9tYWtlIGl0IG1vcmUgZHluYW1pYz9cbiAgICAgICAgdGhpcy5ncmlkID0gW107XG4gICAgICAgIHdoaWxlICh0aGlzLmdyaWQucHVzaChbXSkgPCB0aGlzLnNpemUpO1xuICAgIH1cblxuICAgIGdldENlbGwoeDogbnVtYmVyLCB5OiBudW1iZXIpe1xuICAgICAgcmV0dXJuIHRoaXMuZ3JpZFt4XVt5XTtcbiAgICB9XG5cbiAgICBmaWxsR3JpZChjYWxsYmFjazogRnVuY3Rpb24pIHtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbGVtLmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZpbGwtZ3JpZC1kb25lJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgY2FsbGJhY2soKVxuICAgICAgICB9KTtcblxuICAgICAgICBmb3IgKGxldCB4IGluIHRoaXMuZ3JpZCkge1xuICAgICAgICAgICAgZm9yIChsZXQgeSBpbiB0aGlzLmdyaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZU5ld0VsZW1lbnQoTnVtYmVyKHgpLCBOdW1iZXIoeSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGljaygpe1xuICAgICAgZm9yIChsZXQgeCBpbiB0aGlzLmdyaWQpIHtcbiAgICAgICAgICBmb3IgKGxldCB5IGluIHRoaXMuZ3JpZCkge1xuICAgICAgICAgICAgICB0aGlzLmdyaWRbeF1beV0ud2F0Y2hOZWlnaGJvcnMoKTtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGxldCB4IGluIHRoaXMuZ3JpZCkge1xuICAgICAgICAgIGZvciAobGV0IHkgaW4gdGhpcy5ncmlkKSB7XG4gICAgICAgICAgICAgIHRoaXMuZ3JpZFt4XVt5XS5jb21taXRDaG5hZ2UoKTtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY3JlYXRlTmV3RWxlbWVudCh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGxldCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBlbGVtLmlkID0gYCR7eH0sJHt5fWA7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTmFtZSA9IGBncmlkUG9zaXRpb24gJHt5ID09PSAwID8gJ3JvdycgOiAnJ31gO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbGVtLmFwcGVuZENoaWxkKGVsZW0pO1xuICAgICAgICAgICAgdGhpcy5ncmlkW3hdW3ldID0gbmV3IENlbGxDb250cm9sbGVyKGVsZW0sIHgsIHkpO1xuXG4gICAgICAgICAgICBpZiAoeCA9PSAodGhpcy5zaXplIC0gMSkgJiYgeSA9PSAodGhpcy5zaXplIC0gMSkpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KHRoaXMuZmlsbEdyaWREb25lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgNTApO1xuICAgIH1cbn1cbiIsIlxuaW1wb3J0IHsgQ2VsbENvbnRyb2xsZXIgfSBmcm9tICcuL2NlbGwvQ2VsbENvbnRyb2xsZXInO1xuaW1wb3J0IHsgR3JpZENvbnRyb2xsZXIgfSBmcm9tICcuL2dyaWQvR3JpZENvbnRyb2xsZXInO1xuXG5cbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XG5cbiAgICBsZXQgZ3JpZCA9IG5ldyBHcmlkQ29udHJvbGxlcignZ3JpZCcpO1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0QnV0dG9uJykub25jbGljayA9ICgpID0+IHtcblxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyaWQnKS5pbm5lckhUTUwgPSAnJztcblxuICAgICAgbGV0IGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGVsZW0uaWQgPSAnZ3JpZCcgKyBNYXRoLnJhbmRvbSgpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyaWQnKS5hcHBlbmRDaGlsZChlbGVtKTtcblxuICAgICAgZ3JpZCA9IG5ldyBHcmlkQ29udHJvbGxlcihlbGVtLmlkKTtcblxuICAgICAgICBncmlkLmZpbGxHcmlkKCgpID0+IHtcbiAgICAgICAgICAgIGxldCB0ZXh0QXJlYSA9IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYW51YWwtaW5wdXQnKTtcbiAgICAgICAgICAgIGxldCBsaW5lcyA9IHRleHRBcmVhLnZhbHVlLnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICAgICAgZm9yIChsZXQgbGluZSBvZiBsaW5lcykge1xuICAgICAgICAgICAgICAgIGxldCBhdXggPSBsaW5lLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICAgICAgaWYgKGF1eC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JpZC5nZXRDZWxsKE51bWJlcihhdXhbMF0pLCBOdW1iZXIoYXV4WzFdKSkubGl2ZXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGxldCBtYW51YWxUaWNrID0gbmV3IEN1c3RvbUV2ZW50KCdtYW51YWwtdGljaycpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aWNrQnV0dG9uJykub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFsaXZlcycpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtZGVhZHMnKS5pbm5lckhUTUwgPSAnJztcblxuICAgICAgICBncmlkLnRpY2soKTtcbiAgICB9XG59XG4iXX0=
